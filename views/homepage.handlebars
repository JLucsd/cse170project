
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Smart Shopping - GIST</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/shop-item.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>  
    <link rel="stylesheet" href="/css/normalize.css">  
    <link rel="stylesheet" href="/css/style.css">

</head>
   <script src="/js/editlist.js"></script>
   <script type="text/javascript">
    function test()
    {
        a = {{store_num}};
        //if(a instanceof Integer)
        console.log(a);
        //console.log(#with stores.[0]);
    }
   </script>
<body onLoad = test()> 
     <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#"><img src="/images/navbar_logo.png"></a>
            </div>
           
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    
                    <li>
                        <a href="/newuser_homepage">Change Grocery Store</a>
                    </li>
                     <li>
                        <a href="/visualization">My Trends and Statistics</a>
                    </li>
                    <li>
                        <a href="/index">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
  
  {{#with stores.[0]}}

     <div class="container">
            <div class="row">

                
                <div class="col-lg-12">
                   <a href="#demo" data-toggle="collapse"> <h3><b>{{store_name}}</b></h3></a>
                    <h4> Welcome to {{store_name}}!</h4>
                   
                    <div id="demo" class="collapse">
                         <div class="container">
                          <div class="store-info">
                              <div class="row">
                                  <div class="col-lg-12">
                                      <p>{{store_info}}</p>
                                  </div>
                              </div>
                          </div>
                        </div>
                     
                      <br/>
                    </div>

                    <!-- Trigger the modal with a button -->
                    <button class="button button-block" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" id="element1" value="Start Shopping"> Start Shopping
                    </button>

                    <!-- Modal -->
                    <div id="myModal" class="modal fade" role="dialog">
                      <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Let's get the gist of how you're doing.</h4>
                          </div>
                          <div class="modal-body" class="form-group">
                           <h4>Hunger Level</h4>
                           <p>0 being the least and 5 being the greatest</p>
                               <select class="form-control" class="col-xs-2">
                                  <option value="0">0</option>
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>                
                                </select>

                           <h4>Exhaustion Level</h4>
                           <p>0 being the least and 5 being the greatest</p>
                               <select class="form-control">
                                  <option value="0">0</option>
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>                
                                </select>

                           <h4>How are you feeling?</h4>
                                <p>0 being sad and 5 being very happy</p>
                               
                               <select class="form-control">
                                  <option value="0">0</option>
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>                
                                </select>
                                
                                <h4>Choose list you want use for shopping today</h4>
                                <select class="form-control">
                                {{#each lists}}
                                
                                  <option value="{{id}}">{{title}}</option>
                                                  
                                
                                
                                {{/each}}
                              </select>
                            <h4>By what time do you estimate you would be done with shopping?</h4>
                            <form action="action_page.php">
                              Select a time:
                              <input type="time" name="usr_time">
                            </form>
                          </div>
                          <div class="modal-footer">
                            
                            <a href=/homepage  onClick="javascript:setTimer(1)"><button class="button button-block" class="btn btn-default" data-dismiss="modal">Start Timer</button></a>
                          </div>
                        </div>

                      </div>
                    </div>

                    <div id="finModal" class="modal fade" role="dialog">
                      <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                          
                          <div class="modal-body" class="form-group">
                          <p> Thank you for using Gist!</p> 
                          <div class="modal-footer">
                            <a href=/homepage  onClick="javascript:setTimer(1)"><button class="button button-block" class="btn btn-default" data-dismiss="modal">Stop Timer</button> </a>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>

                    <br>
                    <form action="/newlist" >
                        <button class="button button-block">Create new list</button>
                    </form>
                    <br/>
                </div>
            </div>
    </div>
     
    <hr/>

    <div class="container">
            <div class="row">
                <div class="col-lg-12">
                     <h4><b>Previous shopping lists from {{store_name}}:</b></h4></br>
                </div>
            </div>
    </div>

   <form action = "/editlist" id="st_id">
    <input type="text" style="display:none;" value="{{store_id}}" name="store_id">
    <input type="text" style="display:none;"  id="fid" name="id">
    
   </form>
    <div class="container">
            <div class="row">
                <div class="col-lg-12">      
                    <ul class = "list-group"> 
                        
                        {{#each lists}}
                        <form action="/editlist" id="{{id}}">
                        <li class="list-saved">
                            <input type="text" style="display:none;" value="{{id}}" name="id" id="id_of_list">
                             <input type="text" style="display:none;" value="{{store_id}}" name="store_id" id="id_of_store"> 
                            <input type="text" style="display:none;" value="{{num_id}}" name="id_num" id="id_of_list_num">
                            
                            <button class="button-edit" style="float:right" id="but"><span class="glyphicon glyphicon-edit">Edit</span></button>
                            
                            <button class="button-map" style="float:left" onClick="sendData({{num_id}})"><span class="glyphicon glyphicon-map-marker">Map</span></button> 

                            <p class="text-center"><b>{{title}}</b><br>{{date}}</p>
                        </li>

                            
                      </form>
                        {{/each}}

                    </ul>

                </div>
            </div>
        </div>
    

    {{/with}}
  

<script>
    
    function sendData(a)
    {
      console.log(a);
      var list_id = document.getElementById("id_of_list_num");
      var store_id = document.getElementById("id_of_store");
      var sh = document.getElementById('list'+a);
      sh.action="/shop";
      
      console.log(list_id.value);
      console.log(store_id.value);
      sh.submit();
    }
    function pass(a)
    {
        document.getElementById("fid").value = a;
       // console.log(a);
        document.getElementById("st_id").submit();
    }   
</script>
<form action="#" id="time">
    <input type="text" hidden="true" name="name" id="id">
    <input type="text" hidden="true" name="description" id="desc">
</form>
    <script>
        function setTimer(idElement)
        {
            
            var element = document.getElementById('element'+idElement);
            
            if (idElement == 1 || idElement == 2) {
            //console.log("as");
            var trg = element.getAttribute('data-target');
            console.log(trg);
            if (element.value == 'Start Shopping') {
                 
                 this.d = new Date;
                 this.start = d.getTime();
                 //console.log("start time=" + )
                // document.getElementById("time").innerHTML = 0;
                element.innerHTML = 'Stop Shopping';
                element.value = 'Stop Shopping';
                element.setAttribute('data-target','#finModal')
                
            }
            else {
                console.log("qweqweqwrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr");
                 this.d = new Date;
                 console.log("total time= "+ (d.getTime()-this.start)/1000);
                 //document.getElementById("time").innerHTML = (d.getTime()-this.start)/1000;
                 document.getElementById("id").value="Ralphs";
                 document.getElementById("desc").value=(d.getTime()-this.start)/1000;
                    document.getElementById("time").submit();
                    element.value = 'Start Shopping';
                    element.innerHTML = 'Start Shopping'
                    element.setAttribute('data-target','#myModal')
                    
                 
            }
        }
        }
    </script>

   
    <script src="/js/jquery.js"></script>
    
    <script src="/js/bootstrap.min.js"></script>
</body>
</html>